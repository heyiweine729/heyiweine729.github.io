---
title: "STM32 学习笔记：Part 1 - 芯片简介与最小系统"
date: 2026-02-18T21:45:00+08:00
draft: false
author: "Sanjin"
summary: "从 Cortex-M3 内核架构到最小系统电路。深入理解 STM32F103 的存储器映射、启动模式及 GPIO 的八种工作模式。"
tags: ["STM32", "Embedded", "Hardware", "Cortex-M3"]
categories: ["Study Logs", "Embedded Systems"]
---

# STM32 学习笔记：Part 1 - 芯片简介与最小系统

> 学习进度：进行中
> 关键主题：Cortex-M3, 最小系统, GPIO, 启动模式

---

## 一、 STM32 简介

### 0. STM32 是什么
ST 公司开发的、基于 **ARM Cortex-M** 内核的 32 位微控制器。主要用于嵌入式领域。

### 1. 主要系列
* **高性能**: F4, F7, H7
* **主流**: F0, F1 (我们使用的), F3
* **超低功耗**: L0, L1, L4
* **无线**: WB, WL

### 2. ARM 是什么
即指 ARM 公司，又指处理器架构。
* ARM 公司提供半导体知识产权 (IP)，大多电子产品都用的是这个架构。
* ARM 提供芯片内核，ST 公司设计外围设备（如存储器、外设资源等）。
* 芯片分为 Cortex-A (高端应用，如手机)、Cortex-R (实时)、Cortex-M (嵌入式) 系列。

### 3. STM32F103C8T6 (核心板参数)
* **系列**: STM32F1 (主流型)
* **内核**: ARM Cortex-M3
* **主频**: 72 MHz
* **RAM**: 20 KB (SRAM)
* **ROM**: 64 KB (Flash)
* **电压**: 2.0-3.6V (标准 3.3V)
* **封装**: LQFP48

### 4. 命名规则详解

| **代码分段** | **示例值** | **专业含义** | **详细说明** |
| :--- | :--- | :--- | :--- |
| **产品系列** | **STM32** | 32位微控制器 | 基于 ARM 内核的 32 位产品线。 |
| **产品类型** | **F** | 基础型/主流型 | **F**: 基础型；**L**: 低功耗；**H**: 高性能；**G**: 混合信号。 |
| **核心系列** | **103** | 增强型系列 | **101**: 基本型；**103**: 增强型（外设丰富）；**407**: 高性能 F4 系列。 |
| **引脚数目** | **C** | 48 引脚 | **T**: 36脚；**C**: 48脚；**R**: 64脚；**V**: 100脚；**Z**: 144脚。 |
| **Flash容量**| **8** | 64 KB | **6**: 32KB；**8**: 64KB；**B**: 128KB；**C**: 256KB；**E**: 512KB。 |
| **封装形式** | **T** | LQFP 封装 | **T**: LQFP（方形扁平）；**H**: BGA（球栅阵列）；**U**: VFQFPN。 |
| **温度范围** | **6** | 工业级 | **6**: -40°C~85°C；**7**: -40°C~105°C。 |

### 5. 系统架构
*(注：请将图片文件放入 static 文件夹，并修改下方路径)*
![系统架构图](/images/Pasted-image-20260213153142.png)

---

## 二、 核心架构与硬件基础

### 6. 存储器映像 (Memory Map)
Cortex-M3 寻址范围 $4GB$ ($2^{32}$)。ST 将这 4GB 空间分成了 8 个块 (Block)，每块 512MB。

* **Flash (Block 0)**: 起始地址 `0x0800 0000`。存放代码，掉电不丢失。
* **SRAM (Block 1)**: 起始地址 `0x2000 0000`。存放变量，速度快，掉电丢失。
* **System Memory**: 存放 ST 出厂 Bootloader（用于串口 ISP 下载）。
* **Peripherals (外设)**: 起始地址 `0x4000 0000`。GPIO、定时器等寄存器都在这里。

### 7. 启动配置 (Boot Modes)
通过 **BOOT0** 和 **BOOT1** 引脚的高低电平，决定单片机上电后从哪里启动。

| BOOT0 | BOOT1 | 启动模式 | 说明 |
| :---: | :---: | :--- | :--- |
| **0** | X | **Main Flash** | **主闪存启动** (默认)。正常运行用户程序。 |
| **1** | **0** | **System Memory** | **系统存储器启动**。运行 Bootloader，用于串口下载。 |
| **1** | **1** | **SRAM** | **内部 SRAM 启动**。用于调试，重启后代码丢失。 |

### 8. 最小系统电路 (Minimal System)
单片机能正常工作的“最低生存保障”：
1.  **供电**: 3.3V 稳压，VDD/VSS 需接滤波电容。
2.  **复位**: NRST 引脚，低电平复位。
3.  **时钟**: HSE (8MHz 晶振) 和 LSE (32.768kHz 晶振)。
4.  **启动**: BOOT0 接地，BOOT1 接地。
5.  **下载**: SWD 接口 (SWDIO, SWCLK)。

### 9. GPIO (通用输入输出)
STM32 的引脚控制核心。F103 的 GPIO 有 **8 种工作模式**：

#### 输入模式 (Input)
1.  **浮空输入 (Floating)**: 电平完全由外部信号决定（如按键）。
2.  **上拉输入 (Pull-up)**: 默认高电平。
3.  **下拉输入 (Pull-down)**: 默认低电平。
4.  **模拟输入 (Analog)**: 用于 ADC 采集电压，关闭数字功能。

#### 输出模式 (Output)
5.  **推挽输出 (Push-Pull)**: **最常用**。输出强高/低电平，驱动能力强。
6.  **开漏输出 (Open-Drain)**: 只能拉低，高电平需外接上拉电阻。用于 **I2C** 或 5V 电平匹配。
7.  **复用推挽 (AF Push-Pull)**: 控制权交给片上外设（如串口 TX）。
8.  **复用开漏 (AF Open-Drain)**: 控制权交给片上外设（如 I2C SDA）。