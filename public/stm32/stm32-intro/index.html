<!DOCTYPE html>
<html lang="zh" dir="auto" data-theme="dark">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>STM32 学习笔记：Part 1 - 芯片简介与最小系统 | Sanjin&#39;s Log</title>
<meta name="keywords" content="STM32, Embedded, Hardware, Cortex-M3">
<meta name="description" content="从 Cortex-M3 内核架构到最小系统电路。深入理解 STM32F103 的存储器映射、启动模式及 GPIO 的八种工作模式。">
<meta name="author" content="Sanjin">
<link rel="canonical" href="http://localhost:1313/stm32/stm32-intro/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a29c24210eb31d9ce56f669c66a35c9c51b17376b7764e336a49af7dec914cf0.css" integrity="sha256-opwkIQ6zHZzlb2acZqNcnFGxc3a3dk4zakmvfeyRTPA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="http://localhost:1313/stm32/stm32-intro/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="http://localhost:1313/stm32/stm32-intro/">
  <meta property="og:site_name" content="Sanjin&#39;s Log">
  <meta property="og:title" content="STM32 学习笔记：Part 1 - 芯片简介与最小系统">
  <meta property="og:description" content="从 Cortex-M3 内核架构到最小系统电路。深入理解 STM32F103 的存储器映射、启动模式及 GPIO 的八种工作模式。">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="stm32">
    <meta property="article:published_time" content="2026-02-18T21:45:00+08:00">
    <meta property="article:modified_time" content="2026-02-18T21:45:00+08:00">
    <meta property="article:tag" content="STM32">
    <meta property="article:tag" content="Embedded">
    <meta property="article:tag" content="Hardware">
    <meta property="article:tag" content="Cortex-M3">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="STM32 学习笔记：Part 1 - 芯片简介与最小系统">
<meta name="twitter:description" content="从 Cortex-M3 内核架构到最小系统电路。深入理解 STM32F103 的存储器映射、启动模式及 GPIO 的八种工作模式。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Stm32s",
      "item": "http://localhost:1313/stm32/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "STM32 学习笔记：Part 1 - 芯片简介与最小系统",
      "item": "http://localhost:1313/stm32/stm32-intro/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "STM32 学习笔记：Part 1 - 芯片简介与最小系统",
  "name": "STM32 学习笔记：Part 1 - 芯片简介与最小系统",
  "description": "从 Cortex-M3 内核架构到最小系统电路。深入理解 STM32F103 的存储器映射、启动模式及 GPIO 的八种工作模式。",
  "keywords": [
    "STM32", "Embedded", "Hardware", "Cortex-M3"
  ],
  "articleBody": "STM32 学习笔记：Part 1 - 芯片简介与最小系统 学习进度：进行中 关键主题：Cortex-M3, 最小系统, GPIO, 启动模式\n一、 STM32 简介 0. STM32 是什么 ST 公司开发的、基于 ARM Cortex-M 内核的 32 位微控制器。主要用于嵌入式领域。\n1. 主要系列 高性能: F4, F7, H7 主流: F0, F1 (我们使用的), F3 超低功耗: L0, L1, L4 无线: WB, WL 2. ARM 是什么 即指 ARM 公司，又指处理器架构。\nARM 公司提供半导体知识产权 (IP)，大多电子产品都用的是这个架构。 ARM 提供芯片内核，ST 公司设计外围设备（如存储器、外设资源等）。 芯片分为 Cortex-A (高端应用，如手机)、Cortex-R (实时)、Cortex-M (嵌入式) 系列。 3. STM32F103C8T6 (核心板参数) 系列: STM32F1 (主流型) 内核: ARM Cortex-M3 主频: 72 MHz RAM: 20 KB (SRAM) ROM: 64 KB (Flash) 电压: 2.0-3.6V (标准 3.3V) 封装: LQFP48 4. 命名规则详解 代码分段 示例值 专业含义 详细说明 产品系列 STM32 32位微控制器 基于 ARM 内核的 32 位产品线。 产品类型 F 基础型/主流型 F: 基础型；L: 低功耗；H: 高性能；G: 混合信号。 核心系列 103 增强型系列 101: 基本型；103: 增强型（外设丰富）；407: 高性能 F4 系列。 引脚数目 C 48 引脚 T: 36脚；C: 48脚；R: 64脚；V: 100脚；Z: 144脚。 Flash容量 8 64 KB 6: 32KB；8: 64KB；B: 128KB；C: 256KB；E: 512KB。 封装形式 T LQFP 封装 T: LQFP（方形扁平）；H: BGA（球栅阵列）；U: VFQFPN。 温度范围 6 工业级 6: -40°C85°C；7: -40°C105°C。 5. 系统架构 (注：请将图片文件放入 static 文件夹，并修改下方路径) 二、 核心架构与硬件基础 6. 存储器映像 (Memory Map) Cortex-M3 寻址范围 $4GB$ ($2^{32}$)。ST 将这 4GB 空间分成了 8 个块 (Block)，每块 512MB。\nFlash (Block 0): 起始地址 0x0800 0000。存放代码，掉电不丢失。 SRAM (Block 1): 起始地址 0x2000 0000。存放变量，速度快，掉电丢失。 System Memory: 存放 ST 出厂 Bootloader（用于串口 ISP 下载）。 Peripherals (外设): 起始地址 0x4000 0000。GPIO、定时器等寄存器都在这里。 7. 启动配置 (Boot Modes) 通过 BOOT0 和 BOOT1 引脚的高低电平，决定单片机上电后从哪里启动。\nBOOT0 BOOT1 启动模式 说明 0 X Main Flash 主闪存启动 (默认)。正常运行用户程序。 1 0 System Memory 系统存储器启动。运行 Bootloader，用于串口下载。 1 1 SRAM 内部 SRAM 启动。用于调试，重启后代码丢失。 8. 最小系统电路 (Minimal System) 单片机能正常工作的“最低生存保障”：\n供电: 3.3V 稳压，VDD/VSS 需接滤波电容。 复位: NRST 引脚，低电平复位。 时钟: HSE (8MHz 晶振) 和 LSE (32.768kHz 晶振)。 启动: BOOT0 接地，BOOT1 接地。 下载: SWD 接口 (SWDIO, SWCLK)。 9. GPIO (通用输入输出) STM32 的引脚控制核心。F103 的 GPIO 有 8 种工作模式：\n输入模式 (Input) 浮空输入 (Floating): 电平完全由外部信号决定（如按键）。 上拉输入 (Pull-up): 默认高电平。 下拉输入 (Pull-down): 默认低电平。 模拟输入 (Analog): 用于 ADC 采集电压，关闭数字功能。 输出模式 (Output) 推挽输出 (Push-Pull): 最常用。输出强高/低电平，驱动能力强。 开漏输出 (Open-Drain): 只能拉低，高电平需外接上拉电阻。用于 I2C 或 5V 电平匹配。 复用推挽 (AF Push-Pull): 控制权交给片上外设（如串口 TX）。 复用开漏 (AF Open-Drain): 控制权交给片上外设（如 I2C SDA）。 ",
  "wordCount" : "306",
  "inLanguage": "zh",
  "datePublished": "2026-02-18T21:45:00+08:00",
  "dateModified": "2026-02-18T21:45:00+08:00",
  "author":{
    "@type": "Person",
    "name": "Sanjin"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/stm32/stm32-intro/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sanjin's Log",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Sanjin&#39;s Log (Alt + H)">Sanjin&#39;s Log</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/cs50/" title="CS50 课程">
                    <span>CS50 课程</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/stm32/" title="STM32 笔记">
                    <span>STM32 笔记</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      STM32 学习笔记：Part 1 - 芯片简介与最小系统
    </h1>
    <div class="post-meta"><span title='2026-02-18 21:45:00 +0800 CST'>2026年2月18日</span>&nbsp;·&nbsp;<span>Sanjin</span>

</div>
  </header> 
  <div class="post-content"><h1 id="stm32-学习笔记part-1---芯片简介与最小系统">STM32 学习笔记：Part 1 - 芯片简介与最小系统<a hidden class="anchor" aria-hidden="true" href="#stm32-学习笔记part-1---芯片简介与最小系统">#</a></h1>
<blockquote>
<p>学习进度：进行中
关键主题：Cortex-M3, 最小系统, GPIO, 启动模式</p>
</blockquote>
<hr>
<h2 id="一-stm32-简介">一、 STM32 简介<a hidden class="anchor" aria-hidden="true" href="#一-stm32-简介">#</a></h2>
<h3 id="0-stm32-是什么">0. STM32 是什么<a hidden class="anchor" aria-hidden="true" href="#0-stm32-是什么">#</a></h3>
<p>ST 公司开发的、基于 <strong>ARM Cortex-M</strong> 内核的 32 位微控制器。主要用于嵌入式领域。</p>
<h3 id="1-主要系列">1. 主要系列<a hidden class="anchor" aria-hidden="true" href="#1-主要系列">#</a></h3>
<ul>
<li><strong>高性能</strong>: F4, F7, H7</li>
<li><strong>主流</strong>: F0, F1 (我们使用的), F3</li>
<li><strong>超低功耗</strong>: L0, L1, L4</li>
<li><strong>无线</strong>: WB, WL</li>
</ul>
<h3 id="2-arm-是什么">2. ARM 是什么<a hidden class="anchor" aria-hidden="true" href="#2-arm-是什么">#</a></h3>
<p>即指 ARM 公司，又指处理器架构。</p>
<ul>
<li>ARM 公司提供半导体知识产权 (IP)，大多电子产品都用的是这个架构。</li>
<li>ARM 提供芯片内核，ST 公司设计外围设备（如存储器、外设资源等）。</li>
<li>芯片分为 Cortex-A (高端应用，如手机)、Cortex-R (实时)、Cortex-M (嵌入式) 系列。</li>
</ul>
<h3 id="3-stm32f103c8t6-核心板参数">3. STM32F103C8T6 (核心板参数)<a hidden class="anchor" aria-hidden="true" href="#3-stm32f103c8t6-核心板参数">#</a></h3>
<ul>
<li><strong>系列</strong>: STM32F1 (主流型)</li>
<li><strong>内核</strong>: ARM Cortex-M3</li>
<li><strong>主频</strong>: 72 MHz</li>
<li><strong>RAM</strong>: 20 KB (SRAM)</li>
<li><strong>ROM</strong>: 64 KB (Flash)</li>
<li><strong>电压</strong>: 2.0-3.6V (标准 3.3V)</li>
<li><strong>封装</strong>: LQFP48</li>
</ul>
<h3 id="4-命名规则详解">4. 命名规则详解<a hidden class="anchor" aria-hidden="true" href="#4-命名规则详解">#</a></h3>
<table>
  <thead>
      <tr>
          <th style="text-align: left"><strong>代码分段</strong></th>
          <th style="text-align: left"><strong>示例值</strong></th>
          <th style="text-align: left"><strong>专业含义</strong></th>
          <th style="text-align: left"><strong>详细说明</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>产品系列</strong></td>
          <td style="text-align: left"><strong>STM32</strong></td>
          <td style="text-align: left">32位微控制器</td>
          <td style="text-align: left">基于 ARM 内核的 32 位产品线。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>产品类型</strong></td>
          <td style="text-align: left"><strong>F</strong></td>
          <td style="text-align: left">基础型/主流型</td>
          <td style="text-align: left"><strong>F</strong>: 基础型；<strong>L</strong>: 低功耗；<strong>H</strong>: 高性能；<strong>G</strong>: 混合信号。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>核心系列</strong></td>
          <td style="text-align: left"><strong>103</strong></td>
          <td style="text-align: left">增强型系列</td>
          <td style="text-align: left"><strong>101</strong>: 基本型；<strong>103</strong>: 增强型（外设丰富）；<strong>407</strong>: 高性能 F4 系列。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>引脚数目</strong></td>
          <td style="text-align: left"><strong>C</strong></td>
          <td style="text-align: left">48 引脚</td>
          <td style="text-align: left"><strong>T</strong>: 36脚；<strong>C</strong>: 48脚；<strong>R</strong>: 64脚；<strong>V</strong>: 100脚；<strong>Z</strong>: 144脚。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>Flash容量</strong></td>
          <td style="text-align: left"><strong>8</strong></td>
          <td style="text-align: left">64 KB</td>
          <td style="text-align: left"><strong>6</strong>: 32KB；<strong>8</strong>: 64KB；<strong>B</strong>: 128KB；<strong>C</strong>: 256KB；<strong>E</strong>: 512KB。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>封装形式</strong></td>
          <td style="text-align: left"><strong>T</strong></td>
          <td style="text-align: left">LQFP 封装</td>
          <td style="text-align: left"><strong>T</strong>: LQFP（方形扁平）；<strong>H</strong>: BGA（球栅阵列）；<strong>U</strong>: VFQFPN。</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>温度范围</strong></td>
          <td style="text-align: left"><strong>6</strong></td>
          <td style="text-align: left">工业级</td>
          <td style="text-align: left"><strong>6</strong>: -40°C<del>85°C；<strong>7</strong>: -40°C</del>105°C。</td>
      </tr>
  </tbody>
</table>
<h3 id="5-系统架构">5. 系统架构<a hidden class="anchor" aria-hidden="true" href="#5-系统架构">#</a></h3>
<p><em>(注：请将图片文件放入 static 文件夹，并修改下方路径)</em>
<img alt="系统架构图" loading="lazy" src="/images/Pasted-image-20260213153142.png"></p>
<hr>
<h2 id="二-核心架构与硬件基础">二、 核心架构与硬件基础<a hidden class="anchor" aria-hidden="true" href="#二-核心架构与硬件基础">#</a></h2>
<h3 id="6-存储器映像-memory-map">6. 存储器映像 (Memory Map)<a hidden class="anchor" aria-hidden="true" href="#6-存储器映像-memory-map">#</a></h3>
<p>Cortex-M3 寻址范围 $4GB$ ($2^{32}$)。ST 将这 4GB 空间分成了 8 个块 (Block)，每块 512MB。</p>
<ul>
<li><strong>Flash (Block 0)</strong>: 起始地址 <code>0x0800 0000</code>。存放代码，掉电不丢失。</li>
<li><strong>SRAM (Block 1)</strong>: 起始地址 <code>0x2000 0000</code>。存放变量，速度快，掉电丢失。</li>
<li><strong>System Memory</strong>: 存放 ST 出厂 Bootloader（用于串口 ISP 下载）。</li>
<li><strong>Peripherals (外设)</strong>: 起始地址 <code>0x4000 0000</code>。GPIO、定时器等寄存器都在这里。</li>
</ul>
<h3 id="7-启动配置-boot-modes">7. 启动配置 (Boot Modes)<a hidden class="anchor" aria-hidden="true" href="#7-启动配置-boot-modes">#</a></h3>
<p>通过 <strong>BOOT0</strong> 和 <strong>BOOT1</strong> 引脚的高低电平，决定单片机上电后从哪里启动。</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">BOOT0</th>
          <th style="text-align: center">BOOT1</th>
          <th style="text-align: left">启动模式</th>
          <th style="text-align: left">说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><strong>0</strong></td>
          <td style="text-align: center">X</td>
          <td style="text-align: left"><strong>Main Flash</strong></td>
          <td style="text-align: left"><strong>主闪存启动</strong> (默认)。正常运行用户程序。</td>
      </tr>
      <tr>
          <td style="text-align: center"><strong>1</strong></td>
          <td style="text-align: center"><strong>0</strong></td>
          <td style="text-align: left"><strong>System Memory</strong></td>
          <td style="text-align: left"><strong>系统存储器启动</strong>。运行 Bootloader，用于串口下载。</td>
      </tr>
      <tr>
          <td style="text-align: center"><strong>1</strong></td>
          <td style="text-align: center"><strong>1</strong></td>
          <td style="text-align: left"><strong>SRAM</strong></td>
          <td style="text-align: left"><strong>内部 SRAM 启动</strong>。用于调试，重启后代码丢失。</td>
      </tr>
  </tbody>
</table>
<h3 id="8-最小系统电路-minimal-system">8. 最小系统电路 (Minimal System)<a hidden class="anchor" aria-hidden="true" href="#8-最小系统电路-minimal-system">#</a></h3>
<p>单片机能正常工作的“最低生存保障”：</p>
<ol>
<li><strong>供电</strong>: 3.3V 稳压，VDD/VSS 需接滤波电容。</li>
<li><strong>复位</strong>: NRST 引脚，低电平复位。</li>
<li><strong>时钟</strong>: HSE (8MHz 晶振) 和 LSE (32.768kHz 晶振)。</li>
<li><strong>启动</strong>: BOOT0 接地，BOOT1 接地。</li>
<li><strong>下载</strong>: SWD 接口 (SWDIO, SWCLK)。</li>
</ol>
<h3 id="9-gpio-通用输入输出">9. GPIO (通用输入输出)<a hidden class="anchor" aria-hidden="true" href="#9-gpio-通用输入输出">#</a></h3>
<p>STM32 的引脚控制核心。F103 的 GPIO 有 <strong>8 种工作模式</strong>：</p>
<h4 id="输入模式-input">输入模式 (Input)<a hidden class="anchor" aria-hidden="true" href="#输入模式-input">#</a></h4>
<ol>
<li><strong>浮空输入 (Floating)</strong>: 电平完全由外部信号决定（如按键）。</li>
<li><strong>上拉输入 (Pull-up)</strong>: 默认高电平。</li>
<li><strong>下拉输入 (Pull-down)</strong>: 默认低电平。</li>
<li><strong>模拟输入 (Analog)</strong>: 用于 ADC 采集电压，关闭数字功能。</li>
</ol>
<h4 id="输出模式-output">输出模式 (Output)<a hidden class="anchor" aria-hidden="true" href="#输出模式-output">#</a></h4>
<ol start="5">
<li><strong>推挽输出 (Push-Pull)</strong>: <strong>最常用</strong>。输出强高/低电平，驱动能力强。</li>
<li><strong>开漏输出 (Open-Drain)</strong>: 只能拉低，高电平需外接上拉电阻。用于 <strong>I2C</strong> 或 5V 电平匹配。</li>
<li><strong>复用推挽 (AF Push-Pull)</strong>: 控制权交给片上外设（如串口 TX）。</li>
<li><strong>复用开漏 (AF Open-Drain)</strong>: 控制权交给片上外设（如 I2C SDA）。</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/stm32/">STM32</a></li>
      <li><a href="http://localhost:1313/tags/embedded/">Embedded</a></li>
      <li><a href="http://localhost:1313/tags/hardware/">Hardware</a></li>
      <li><a href="http://localhost:1313/tags/cortex-m3/">Cortex-M3</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">Sanjin&#39;s Log</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
